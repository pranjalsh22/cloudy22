import streamlit as st
import runpy
import os

#link:
# https://github.com/pranjalsh22/cloudy22/blob/main/Poster_2024-11_ISSAC2024_Pranjal_v10-final.pdf

#------------
import streamlit as st
import base64

def display_poster(image_file, preview_width=400):
    """
    Displays a research poster with a small preview that can be clicked to enlarge.
    
    Args:
        image_file (str): Path to the poster image.
        preview_width (int): Width of the small preview in pixels.
    """
    # Read and encode image
    with open(image_file, "rb") as f:
        data = f.read()
    encoded = base64.b64encode(data).decode()
    
    # HTML + CSS + JS
    st.markdown(
        f"""
        <style>
        .poster-box {{
            text-align: center;
            margin: 20px 0;
        }}
        .poster-img {{
            width: {preview_width}px;
            max-width: 90%;
            transition: width 0.3s ease;
            cursor: zoom-in;
            border: 2px solid #ccc;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.3);
            border-radius: 8px;
        }}
        </style>
        
        <div class="poster-box">
            <img src="data:image/jpg;base64,{encoded}" 
                 class="poster-img"
                 onclick="this.style.width = this.style.width === '{preview_width}px' ? '90%' : '{preview_width}px';">
        </div>
        """,
        unsafe_allow_html=True
    )

# Usage
display_poster("poster.jpg", preview_width=400)

#-----------
st.set_page_config(page_title="My Streamlit App", layout="wide")

# Paths to your scripts
PAGES = {
    "Home": {"path": None, "logo": "üè†"},
    "Continuum File": {"path": "pages/save_continuum_file.py", "logo": "üíæ"},
    "Cloudy Out File": {"path": "pages/cloudy_out_file.py", "logo": "‚òÅÔ∏è"}
}

if "page" not in st.session_state:
    st.session_state.page = "Home"

cols = st.columns(len(PAGES))
for i, (name, details) in enumerate(PAGES.items()):
    if cols[i].button(f"{details['logo']} {name}"):
        st.session_state.page = name

st.markdown("---")

if st.session_state.page == "Home":
    st.title("CLOUDY output file interpretor")
    st.write("by Pranjal Sharma")
    st.write("The goal of this webapp is analyse the output files generated by Cloudy:the spectral synthesis code.")
    st.header("The .out file")
    st.write("The lines that for the .out file and display visual.")
    st.header("The continuum file")
    st.write("The continuum file generated using the save continuum command can be using to analyse the bolometric luminosity of the cloud or the source.")
    st.header(" My work")
else:
    page_path = PAGES[st.session_state.page]["path"]
    if page_path and os.path.exists(page_path):
        # Execute the page script just like running `streamlit run <file>`
        runpy.run_path(page_path, run_name="__main__")
    else:
        st.error(f"Page not found: {page_path}")
